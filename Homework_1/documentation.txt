За подусловие a: от city.csv взимам реда, на който се среща "Wuhan" и взимам първата колона, кодето се намира името на града на китайски. След това във файла spread.csv търся стринга,който съм получила(името на града) чрез опцията -f, като първия аргумент е файла, от който взимам pattern-a и тъй като това е stdin, 1я аргуммент е "-", а втория аргумент е файла, в когото търся. От съответния ред, на който има срещане(всеки град се среща по 1 път) изрязвам 4тата колона, където са смъртните случаи.

За подусловие b: означавам, че разделителя между отделните колони е ',' и ако за дадения ред стойността на колона 3(регистрираните случаи) е поне 101, се изпълняват командите в body, т.е. ползвам printf за да изпринтя стойността на 1та колона(име на града) и пресмятам нивото на смъртност по зададената формула. %s означава, че третирам аргумена като стринг, а %d, че се взима само цялата част от подаденото число, т.е. изпълнява се условието за целочисленост и това да е закръглено надолу. След това сортирам резултата нумерографски по нивото на смъртност наопaки(т.е. в намаляващ ред) и изрязвам първите 10 реда.

За подусловие c: тъй като за да намеря нивото на смъртност по провинции трябва да намеря обшия брой регистрирани и общия брой смъртни случаи, но ги имам само по градове обединявам city_province.csv и spread.csv, като ги сортирам лексикографски по градове и използвам pprocess substitution за да пренасоча stdout на sort към stdin на join. Използвам опццията -о, за да подредя колоните по начина <име на провинция>,<регистрирани случаи в град в тази провинцция>,<смъртни случаи в град в тази провинция> и -j за да обедина 2та файла по градове. След това сортирам реезълтата лексикографско по провинции, за да може всички редове за дадената провинция да са един след друг, а не ръснати из файла. Задавам на awk, че разпределителя между колоните е ',' и използвам два асоциативни масивa - registered и deaths. В registered на позицията за съответния стринг(име на провинция) прибавям регистрираните случаи в града, а в deaths - смъртните случаи. След като се достигне края на файла се изпълнява END, където имам for-цикъл, който изпринтва стринга,който определя позицията в масивите и стойностите съответно на двата масива, които са с еднаква дължина. След това както и в подусловие b изпринтвам името на провинцията и нивото на смъртност, закръглено надолу и целочислено, като проверявам дали броя регистрирани случаи е повече от нула, за д ане деля на нула. Не определям delimieter, защото по default принт разделя аргументите с whitespace. След това сортирам резултата нумерографски по нивото на смъртност наопaки(т.е. в намаляващ ред) и изрязвам първите 10 реда.

За подусловие d: 
за top_cities_en.sh: първо обединявам city.csv и spread.csv, като ги сортирам и ги подавам на join чрез process substitution и ги обединявам по името на града на китайски. След това означавам, че разделителя между отделните колони е ',' и ако за дадения ред стойността на колона 4(регистрираните случаи) е повече от 100(т.е. поне 101, защото стойностите са целочислени), се изпълняват командите в body, т.е. ползвам printf за да изпринтя стойността на 1та колона(име на града) и пресмятам нивото на смъртност по зададената формула. Отново сортирам резултата нумерографски по нивото на смъртност наопaки(т.е. в намаляващ ред) и изрязвам първите 10 реда.

за top_provinces_en.sh: първо правя както в подусловие c: обединявам city_province.csv и spread.csv, подреждам колоните, чрез два асоциативни масива пресмятам броя регистрирани и броя смъртни случаи за всяка провинция и след това пресмятам и нивото на смъртност, като проверявам дали броя регистрирани случаи е повече от нула. Резултата сортирам лексикографски по провинции и го обединявам със сортирания по същия начин файл provinces.sh чрез join. Обединявам ги по първото поле- името на ппровинцията на китайски. Оказвам единия файл да се чете от stdin чрез -, а другия го пренасочвам към stdin на join чрез process substitution. Ползвам awk за да изппринтя резултата в желания формат, сортирам нумерографски по нивото на смъртност в намаляващ ред и изрязвам първите 10 реда.
